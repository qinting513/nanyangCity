(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-base_apply-base_apply_page"],{"0316":function(e,t,a){"use strict";var i=a("d0ba"),n=a.n(i);n.a},"0e29":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bottom-btns[data-v-4a50a79a]{position:fixed;z-index:9999;bottom:0;left:0;right:0;height:%?100?%;width:100vw;text-align:center;line-height:%?100?%}.bottom-btns .pre[data-v-4a50a79a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#0072ff;background-color:#fff;position:relative}.bottom-btns .pre[data-v-4a50a79a]:after{content:"";position:absolute;top:%?24?%;right:0;bottom:%?24?%;width:1px;margin:auto 0;background-color:#ddd;overflow:hidden}.bottom-btns .tempstore[data-v-4a50a79a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#0072ff;background-color:#fff}.bottom-btns .next[data-v-4a50a79a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;background-color:#0072ff;color:#fff}.tip[data-v-4a50a79a]{padding:%?20?% %?30?%;color:#ff5200;background-color:#fdf9ee;font-size:%?24?%}.materials[data-v-4a50a79a]{background-color:#fff;overflow-y:scroll}.materials .cell[data-v-4a50a79a]{border-bottom:%?1?% solid #f0f0f0;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;padding:%?20?% %?30?% %?30?% %?30?%}.materials .cell .top[data-v-4a50a79a]{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;font-size:%?30?%;color:#333}.materials .cell .top .star[data-v-4a50a79a]{font-size:%?36?%;color:red;margin-top:%?6?%}.materials .cell .top .paper[data-v-4a50a79a]{margin:0 %?8?%;color:#fff;font-size:%?24?%;padding:%?4?% %?8?%;background-color:#50ba47;border-radius:%?8?%}.materials .cell .center[data-v-4a50a79a]{padding:%?20?% 0;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-flex-wrap:wrap;flex-wrap:wrap}.materials .cell .center .upload-img[data-v-4a50a79a]{width:%?106?%;height:%?106?%;background-color:#f8f8f8;border-radius:%?10?%;margin-right:%?10?%;margin-top:%?10?%;display:inline-block;-webkit-flex-shrink:0;flex-shrink:0}.materials .cell .center .upload-img uni-image[data-v-4a50a79a]{width:100%;height:100%}.materials .cell .center .add-btn[data-v-4a50a79a]{background-color:#f8f8f8;color:#ccc;width:%?106?%;height:%?106?%;border-radius:%?10?%;font-size:%?38?%}.materials .cell .bottom[data-v-4a50a79a]{font-size:%?25?%;color:#777}.materials .cell .bottom .have-data[data-v-4a50a79a]{color:#50ba47}',""]),e.exports=t},"143c":function(e,t,a){"use strict";a.r(t);var i=a("7012"),n=a("6adf");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("ff02");var o,l=a("f0c5"),r=Object(l["a"])(n["default"],i["b"],i["c"],!1,null,"3362b5cc",null,!1,i["a"],o);t["default"]=r.exports},"1ed6":function(e,t,a){"use strict";a.r(t);var i=a("3a25"),n=a("5081");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("ebb4");var o,l=a("f0c5"),r=Object(l["a"])(n["default"],i["b"],i["c"],!1,null,"049bb4a8",null,!1,i["a"],o);t["default"]=r.exports},"273b":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,".next[data-v-3362b5cc]{background-color:#ff0;position:fixed;z-index:99999;height:%?100?%;width:100vw}",""]),e.exports=t},"2e53":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"base-form-uni"},[a("v-uni-view",{staticClass:"input-list"},[a("v-uni-form",[a("input-cell",{attrs:{title:"联系人:",field:"realName",placeholder:"请输入联系人",isNeed:!0,initValue:e.inputData.realName},on:{getItemData:function(t){arguments[0]=t=e.$handleEvent(t),e.getItemData.apply(void 0,arguments)}}}),a("input-cell",{attrs:{title:"移动电话:",field:"mobile",placeholder:"请输入移动电话",isNeed:!0,initValue:e.inputData.mobile},on:{getItemData:function(t){arguments[0]=t=e.$handleEvent(t),e.getItemData.apply(void 0,arguments)}}}),a("input-cell",{attrs:{title:"证件类型:",field:"certificateTypesCode",placeholder:"请选择证件类型",type:"select",itemList:e.itemList,isNeed:!0,initValue:e.itemList[0]},on:{getItemData:function(t){arguments[0]=t=e.$handleEvent(t),e.getItemData.apply(void 0,arguments)}}}),a("input-cell",{attrs:{title:"证件号码:",field:"code",placeholder:"请输入证件号码",isNeed:!0,initValue:e.inputData.code},on:{getItemData:function(t){arguments[0]=t=e.$handleEvent(t),e.getItemData.apply(void 0,arguments)}}}),a("input-cell",{attrs:{title:"电子邮件:",field:"userEmail",placeholder:"请输入电子邮件",initValue:e.inputData.userEmail},on:{getItemData:function(t){arguments[0]=t=e.$handleEvent(t),e.getItemData.apply(void 0,arguments)}}}),a("input-cell",{attrs:{title:"联系地址:",field:"userAddress",placeholder:"请输入联系地址"},on:{getItemData:function(t){arguments[0]=t=e.$handleEvent(t),e.getItemData.apply(void 0,arguments)}}}),a("input-cell",{attrs:{title:"项目名称:",field:"itemName",type:"readOnly",initValue:e.inputData.itemName,isNeed:!0}})],1)],1),a("v-uni-view",{staticClass:"flex-row bottom-btns"},[a("v-uni-view",{staticClass:"tempstore",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tempStore.apply(void 0,arguments)}}},[e._v("暂存")]),a("v-uni-view",{staticClass:"next",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.next.apply(void 0,arguments)}}},[e._v("下一步")])],1)],1)},s=[]},"3a25":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"base-apply"},[a("v-uni-view",{staticClass:"slider-tab"},[a("v-uni-scroll-view",{staticClass:"scroll-view-x",attrs:{"scroll-x":"true"}},e._l(e.navs,(function(t,i){return a("v-uni-view",{key:i,staticClass:"scroll-view-item"},[a("v-uni-view",{class:[e.currentNav==i?"on":""],on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.switchNav(i)}}},[e._v(e._s(t.name))])],1)})),1)],1),a("v-uni-view",{staticClass:"seperator"}),a("v-uni-swiper",{style:[e.heightStyle],attrs:{autoplay:e.autoplay,current:e.currentNav},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.changeSwiper.apply(void 0,arguments)}}},[a("v-uni-swiper-item",[a("base-form",{ref:"baseForm",on:{next:function(t){arguments[0]=t=e.$handleEvent(t),e.nextStep.apply(void 0,arguments)},tempStore:function(t){arguments[0]=t=e.$handleEvent(t),e.tempStore.apply(void 0,arguments)}}})],1),a("v-uni-swiper-item",[a("material-page",{ref:"material",attrs:{pageHeight:e.pageHeight},on:{pre:function(t){arguments[0]=t=e.$handleEvent(t),e.preStep.apply(void 0,arguments)},tempStore:function(t){arguments[0]=t=e.$handleEvent(t),e.tempStore.apply(void 0,arguments)},next:function(t){arguments[0]=t=e.$handleEvent(t),e.nextStep.apply(void 0,arguments)}}})],1),a("v-uni-swiper-item",[a("mail-express-page",{ref:"express",on:{pre:function(t){arguments[0]=t=e.$handleEvent(t),e.preStep.apply(void 0,arguments)},tempStore:function(t){arguments[0]=t=e.$handleEvent(t),e.tempStore.apply(void 0,arguments)},next:function(t){arguments[0]=t=e.$handleEvent(t),e.nextStep.apply(void 0,arguments)}}})],1),a("v-uni-swiper-item",[a("comfirm-page",{attrs:{pageHeight:e.pageHeight},on:{pre:function(t){arguments[0]=t=e.$handleEvent(t),e.preStep.apply(void 0,arguments)},tempStore:function(t){arguments[0]=t=e.$handleEvent(t),e.tempStore.apply(void 0,arguments)},apply:function(t){arguments[0]=t=e.$handleEvent(t),e.apply.apply(void 0,arguments)}}})],1)],1)],1)},s=[]},"407f":function(e,t,a){"use strict";a.r(t);var i=a("82ff"),n=a("b6f8");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("0316");var o,l=a("f0c5"),r=Object(l["a"])(n["default"],i["b"],i["c"],!1,null,"0886522a",null,!1,i["a"],o);t["default"]=r.exports},"452a":function(e,t,a){"use strict";a.r(t);var i=a("87f9"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},5081:function(e,t,a){"use strict";a.r(t);var i=a("b516"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},"6adf":function(e,t,a){"use strict";a.r(t);var i=a("ed55"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},7012:function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"base-form-web"},[a("v-uni-web-view",{attrs:{src:e.url}})],1)},s=[]},"71ef":function(e,t,a){"use strict";a.r(t);var i=a("2e53"),n=a("b1fd");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("df4c");var o,l=a("f0c5"),r=Object(l["a"])(n["default"],i["b"],i["c"],!1,null,"7d952739",null,!1,i["a"],o);t["default"]=r.exports},"74be":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"material-page"},[a("v-uni-view",{staticClass:"tip"},[e._v(e._s(e.tipString))]),a("v-uni-view",{staticClass:"materials",style:[e.materialStyle]},e._l(e.materialList,(function(t,i){return a("v-uni-view",{key:i,staticClass:"flex-column cell"},[a("v-uni-view",{staticClass:"flex-row top"},["1"==t.SFBY?a("v-uni-view",{staticClass:"star"},[e._v("*")]):e._e(),a("v-uni-view",{staticClass:"paper"},[e._v("纸")]),a("v-uni-view",{staticClass:"title"},[e._v(e._s(t.CLMC))])],1),a("v-uni-view",{staticClass:"flex-row center"},[e._l(e.materials?e.materials[t.ID]:[],(function(e,t){return a("v-uni-view",{key:t,staticClass:"upload-img"},[a("v-uni-image",{attrs:{src:e.filepath||e.localImg,mode:"scaleToFill"}})],1)})),a("v-uni-view",{staticClass:"flex-column add-btn",on:{click:function(a){arguments[0]=a=e.$handleEvent(a),e.addImages(t)}}},[a("v-uni-view",{staticClass:"add"},[e._v("+")])],1)],2),a("v-uni-view",{staticClass:"bottom"},[null!=e.materialsNumber[t.ID]?a("v-uni-view",{staticClass:"have-data"},[e._v("已上传("+e._s(e.materialsNumber[t.ID]["uploading"]||0)+"/"+e._s(e.materialsNumber[t.ID]["uploaded"]||0)+")")]):a("v-uni-view",{staticClass:"nodata"},[e._v("暂无上传")])],1)],1)})),1),a("v-uni-view",{staticClass:"flex-row bottom-btns"},[a("v-uni-view",{staticClass:"pre",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pre.apply(void 0,arguments)}}},[e._v("上一步")]),a("v-uni-view",{staticClass:"tempstore",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tempStore.apply(void 0,arguments)}}},[e._v("暂存")]),a("v-uni-view",{staticClass:"next",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.next.apply(void 0,arguments)}}},[e._v("下一步")])],1)],1)},s=[]},"82ff":function(e,t,a){"use strict";var i;a.d(t,"b",(function(){return n})),a.d(t,"c",(function(){return s})),a.d(t,"a",(function(){return i}));var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",{staticClass:"comfirm-page"},[a("v-uni-view",{staticClass:"tip"},[e._v(e._s(e.tipString))]),a("v-uni-view",{staticClass:"flex-row base-view"},[a("v-uni-image",{staticClass:"left-img",attrs:{src:e.stateBase?"/static/images/banshi/icon_bs_success.png":"/static/images/banshi/icon_bs_unupload.png",mode:"aspectFit"}}),a("v-uni-view",{staticClass:"base"},[e._v("基本表单")])],1),a("v-uni-view",{staticClass:"materials",style:[e.materialStyle]},e._l(e.materialList,(function(t,i){return a("v-uni-view",{key:i,staticClass:"cell"},[a("v-uni-view",{staticClass:"flex-row top"},[a("v-uni-image",{staticClass:"left-img",attrs:{src:null!=e.uploadMaterialsNum[t.ID]&&e.uploadMaterialsNum[t.ID]["uploaded"]>0?"/static/images/banshi/icon_bs_success.png":"/static/images/banshi/icon_bs_unupload.png",mode:"aspectFit"}}),a("v-uni-view",{staticClass:"title"},[e._v(e._s(t.CLMC))])],1)],1)})),1),a("v-uni-view",{staticClass:"flex-row bottom-btns"},[a("v-uni-view",{staticClass:"pre",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pre.apply(void 0,arguments)}}},[e._v("上一步")]),a("v-uni-view",{staticClass:"tempstore",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.tempStore.apply(void 0,arguments)}}},[e._v("暂存")]),a("v-uni-view",{staticClass:"next",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.apply.apply(void 0,arguments)}}},[e._v("申报")])],1)],1)},s=[]},"857f":function(e,t,a){"use strict";var i=a("4ea4");a("a9e3"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;i(a("33b4")),i(a("95c1")),i(a("cbf0"));var n=a("2f62"),s={name:"ComfirmPage",props:{pageHeight:{type:Number}},data:function(){return{tipString:"温馨提示：有绿色打勾标识的材料表示编辑正确，有叹号标识的材料需要返回重新编辑。",materialStyle:{},stateBase:!0,materialsNumber:{}}},computed:(0,n.mapState)(["applyItemInfo","userInfo","businessModel","formsModel","materialsModel","postModel","materialList","uploadMaterialsNum"]),mounted:function(){this.pageHeight>0?(this.materialStyle={height:this.pageHeight-120+"px"},console.log("materialStyle:",this.materialStyle)):(this.materialStyle={height:"600px"},console.log("other materialStyle:",this.materialStyle))},methods:{pre:function(){this.$emit("pre",{page:"ComfirmPage"})},tempStore:function(){this.$emit("tempStore",{page:"ComfirmPage"})},apply:function(){this.$emit("apply",{page:"ComfirmPage"})}}};t.default=s},"87f9":function(e,t,a){"use strict";var i=a("4ea4");a("99af"),a("4160"),a("c975"),a("baa5"),a("a9e3"),a("d3b7"),a("25f0"),a("159b"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("33b4")),s=(i(a("95c1")),i(a("cbf0")),a("2f62")),o={name:"MaterialPage",props:{pageHeight:{type:Number}},data:function(){return{tipString:"温馨提示：如果材料是暂未上传的标识需要点击上传附件；如果材料出现上传失败的标识，请点击重新上传，直到出现材料上传成功的绿色标识，既表示该材料已成功电子化上传。",materialsNumber:{},materials:null,uploadInfo:{},materialStyle:{}}},computed:(0,s.mapState)(["applyItemInfo","userInfo","businessModel","formsModel","materialsModel","postModel","materialList"]),created:function(){},mounted:function(){this.pageHeight>0?(this.materialStyle={height:this.pageHeight-180+"px"},console.log("materialStyle:",this.materialStyle)):(this.materialStyle={height:"600px"},console.log("other materialStyle:",this.materialStyle))},methods:{updateMaterials:function(e,t){this.materials=e,this.materialsNumber=t},addImages:function(e){var t=this.materials||{},a=t[e.ID];if(null!=a&&a.length>=9)uni.showToast({icon:"none",title:"最多只能上传9份文件"});else{var i=this;uni.showActionSheet({itemList:["拍照","相册获取"],success:function(t){var a=t.tapIndex;console.log("index:",a),i.chooseImages(a,e)},fail:function(e){console.log(e.errMsg)}})}},chooseImages:function(e,t){var a=this,i=this.materials||{},n=(i[t.ID]||[]).length;uni.chooseImage({count:9-n,sizeType:["original","compressed"],sourceType:1==e?["album"]:["camera"],success:function(e){if(e.tempFilePaths.length>0){var i=a.materials||{},n=(i[t.ID]||[]).length;a.updateMaterialNumber({itemId:t.ID,uploaded:n+e.tempFilePaths.length}),a.uploadAllImgs({model:t,localImgPaths:e.tempFilePaths,localTemp:e.tempFiles})}}})},uploadAllImgs:function(e){var t=this,a=e.i?e.i:0,i=e.success?e.success:0,n=e.fail?e.fail:0,s="上传中(".concat(a+1,"/").concat(e.localImgPaths.length,")");uni.showLoading({title:s,mask:!0}),t.upload2wx(e.localImgPaths[a],e.localTemp[a].name,e.model,(function(e){i++,console.log("successBlock",e),console.log(a)}),(function(i){n++,console.log("failBlock fail index:",a),console.log("failBlock fail err:",i),uni.showToast({icon:"none",title:"第".concat(a+1,"张上传失败")});var s=t.materials||{},o=s[e.model.ID]||[];o.pop(),t.$set(t.materials,e.model.ID,o);var l=(t.materialsNumber[e.model.ID]||{}).uploaded||0;l-=1,t.updateMaterialNumber({itemId:e.model.ID,uploaded:l})}),(function(){if(console.log("completeBlock:",a),a++,a==e.localImgPaths.length){uni.hideLoading(),console.log("执行完毕"),console.log("成功："+i+" 失败："+n);var s={success:i,fail:n};t.$set(t.uploadInfo,e.model.ID,s),t.$store.commit("updateUploadMaterials",t.materials),t.$store.commit("updateUploadMaterialsNum",t.materialsNumber)}else console.log(a),e.i=a,e.success=i,e.fail=n,t.uploadAllImgs(e)}))},upload2wx:function(e,t,a,i,s,o){var l={id:"",fileid:e,filepath:"",filedel:"",filename:"",filetype:"img",isUploading:1,localImg:e},r=this.materials||{},u=r[a.ID]||[];u.push(l),r[a.ID]=u,this.materials=r;var d=e.lastIndexOf("."),c=e.substr(d);if(t)d=t.lastIndexOf("."),c=t.substr(d);var f="材料";if(null!=a.CLMC){var m=n.default.materialNameList;m.forEach((function(e){-1!=a.CLMC.indexOf(e)&&(f=e)}))}for(var p=u.length,h=f+"_"+p+c,v=0;v<u.length;v++){var b=u[v];if(b["filename"]==h){p++,h=f+"_"+p.toString()+c;break}}var g=this;uni.uploadFile({url:n.default.uploadFileURL,filePath:e,name:"file",formData:{USERID:this.userInfo.USER_ID,SXID:this.businessModel.permId,FILENAME:h},success:function(t){var s=JSON.parse(t.data);if(console.log("上传返回数据:",s),200==s.code){var o=s.ReturnValue.FILEID,l=n.default.downloadFileURL+o;console.log("===>after upload responseFileID:",o);for(var r=g.materials||{},u=r[a.ID]||[],d=-1,c=0;c<u.length;c++){var f=u[c];if(f["fileid"]===e){d=c;break}}d>-1&&(u[d]={id:o,fileid:o,filepath:l,filedel:"",filename:h,filetype:"img",isUploading:0,localImg:e}),r[a.ID]=u,g.materials=r,console.log("===>after upload materials:",g.materials);var m=(g.materialsNumber[a.ID]||{}).uploading||0;m+=1,g.updateMaterialNumber({itemId:a.ID,uploading:m}),i(s)}},fail:function(e){s(e)},complete:function(e){o()}})},updateMaterialNumber:function(e){var t=this.materialsNumber||{},a=t[e.itemId]||{};null!=e.uploading&&(a.uploading=e.uploading),null!=e.uploaded&&(a.uploaded=e.uploaded),this.$set(this.materialsNumber,e.itemId,a),this.$forceUpdate()},pre:function(){this.$emit("pre",{page:"MaterialPage"})},tempStore:function(){this.$emit("tempStore",{page:"MaterialPage"})},next:function(){this.$emit("next",{page:"MaterialPage"})},checkMaterial:function(e){if(null!=this.materialList&&0==this.materialList.length)return this.formsModel.stateMaterial=!0,this.$store.commit("updateFormsModel",this.formsModel),!0;var t=!0;for(var a in this.materialList){var i=this.materialList[a];"1"!=i.SFBY||null!=this.materialsNumber[i.ID]&&null!=this.materialsNumber[i.ID]["uploaded"]&&0!=this.materialsNumber[i.ID]["uploaded"]||(t=!1)}return!t&&e&&uni.showToast({icon:"none",title:"带*号的都为必须提交的材料"}),t&&(this.formsModel.stateMaterial=!0,this.$store.commit("updateFormsModel",this.formsModel)),t}}};t.default=o},"91ff":function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.bottom-btns[data-v-0886522a]{position:fixed;z-index:9999;bottom:0;left:0;right:0;height:%?100?%;width:100vw;text-align:center;line-height:%?100?%}.bottom-btns .pre[data-v-0886522a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#0072ff;background-color:#fff;position:relative}.bottom-btns .pre[data-v-0886522a]:after{content:"";position:absolute;top:%?24?%;right:0;bottom:%?24?%;width:1px;margin:auto 0;background-color:#ddd;overflow:hidden}.bottom-btns .tempstore[data-v-0886522a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#0072ff;background-color:#fff}.bottom-btns .next[data-v-0886522a]{-webkit-box-flex:1;-webkit-flex:1;flex:1;background-color:#0072ff;color:#fff}.tip[data-v-0886522a]{padding:%?20?% %?30?%;color:#ff5200;background-color:#fdf9ee;font-size:%?24?%}.base-view[data-v-0886522a]{margin-top:%?16?%;padding:%?20?% %?30?% %?30?% %?30?%;background-color:#fff}.left-img[data-v-0886522a]{width:%?30?%;height:%?30?%;margin-right:%?10?%;-webkit-flex-shrink:0;flex-shrink:0}.materials[data-v-0886522a]{margin-top:%?16?%;background-color:#fff;overflow-y:scroll}.materials .cell[data-v-0886522a]{border-bottom:%?1?% solid #f0f0f0;-webkit-box-align:start;-webkit-align-items:flex-start;align-items:flex-start;padding:%?20?% %?30?% %?30?% %?30?%}.materials .cell .top[data-v-0886522a]{-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;font-size:%?30?%;color:#333}',""]),e.exports=t},"9c7c":function(e,t,a){var i=a("e73e");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("bff6cb0c",i,!0,{sourceMap:!1,shadowMode:!1})},a7a4:function(e,t,a){"use strict";var i=a("b3f0"),n=a.n(i);n.a},aded:function(e,t,a){var i=a("273b");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("21c35766",i,!0,{sourceMap:!1,shadowMode:!1})},b1fd:function(e,t,a){"use strict";a.r(t);var i=a("e6b2"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},b3f0:function(e,t,a){var i=a("0e29");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("65219210",i,!0,{sourceMap:!1,shadowMode:!1})},b516:function(e,t,a){"use strict";var i=a("4ea4");a("2ca0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("33b4")),s=i(a("95c1")),o=(i(a("cbf0")),i(a("71ef"))),l=i(a("143c")),r=i(a("c10d")),u=i(a("a1ee")),d=i(a("407f")),c=a("2f62"),f={name:"BaseApply",components:{BaseForm:o.default,BaseFormWeb:l.default,MaterialPage:r.default,MailExpressPage:u.default,ComfirmPage:d.default},data:function(){return{hasToken:!1,autoplay:!1,currentNav:0,pageHeight:0,heightStyle:{},navs:[{id:0,name:"基本表单"},{id:1,name:"材料上传"},{id:2,name:"速递服务"},{id:3,name:"申报确认"}],isEditable:!0}},computed:(0,c.mapState)(["applyItemInfo","userInfo","businessModel","formsModel","materialsModel","postModel","uploadMaterials","uploadMaterialsNum","materialList"]),onLoad:function(e){this.initPage(e),this.initModels(e)},onShow:function(){var e=getCurrentPages(),t=e[e.length-1];console.log("option:",t.options),this.handleToken(t.options)},methods:{handleToken:function(e){if(null!=e&&void 0!=e){var t,a=this;if(void 0!=e.token&&null!=e.token)this.hasToken=!0,e.token.startsWith("naturalToken")?("1",t={naturalToken:e.token}):("2",t={cropToken:e.token}),uni.request({url:n.default.rootUrl+"/mobile/login.jspx",method:"GET",data:t,success:function(t){if(console.log("logininfo",t),200==t.statusCode){var i=t.data;200==i.code?(a.$store.commit("updateUserInfo",i.ReturnValue),a.initPage(e),a.initModels(e)):uni.showToast("用户信息获取失败")}},fail:function(t){a.initPage(e),a.initModels(e)}})}},preStep:function(e){console.log("preStep",e),this.currentNav=this.currentNav-1},nextStep:function(e){console.log("nextStep",e),this.currentNav=this.currentNav+1},tempStore:function(e){this.goApply(9)},apply:function(e){console.log("apply",e),this.goApply(0)},goApply:function(e){var t=this.cacheBaseInfo(),a=this.$refs.baseForm.checkBaseInfo(!0);if(!1!==a){if(0!=e||this.$refs.material.checkMaterial(!0)){var i=s.default.getBusinessXml(e,this.businessModel,this.userInfo),n=s.default.getFormXml(t),o=s.default.getMaterialXml(this.materialList,this.uploadMaterials,t),l=this.$refs.express.getPostXmlData(),r=s.default.getPostXmlData(l),u={token:this.userInfo.TOKEN,BUSINESS:i,FORMS:n,MATERIALS:o,POSTXML:r},d=this;s.default.tempStore(u).then((function(t){uni.showToast({icon:"success",title:9==e?"暂存成功!":"申报成功!",complete:function(){if(!d.hasToken){var e="../mine/my_business_page/my_business_page";d.businessModel.bsnum&&(e+="?isFromMine=1"),setTimeout((function(){uni.redirectTo({url:e})}),1500)}}}),console.log("申报成功:",t)})).catch((function(e){console.log("err:",e)}))}}else uni.showToast({icon:"none",title:"基本表单带*的选项为必填内容"})},cacheBaseInfo:function(){var e=this.formsModel;return e.pid=e.permId,e.sqrmc=e.realName,e.sqryddh=e.mobile,e.zjlx=e.certificateTypesCode||"10",e.sqrsfzjhm=e.code,e.sqrdzxx=e.userEmail,e.sqrgddh=e.userPhone,e.sqrgddz=e.userAddress,e.sqxmmc=e.itemName,e.bz=e.bz,e},initPage:function(e){uni.setNavigationBarTitle({title:"申报"});var t=this;uni.getSystemInfo({success:function(e){t.pageHeight=e.windowHeight,t.heightStyle={height:e.windowHeight-55+"px"}}}),this.businessModel.permId=e.permId,this.formsModel.permId=e.permId,this.formsModel.stateBaseForm=!1,this.formsModel.itemName=e.itemName,null!=e.bsnum?this.businessModel.bsnum=e.bsnum:this.businessModel.bsnum=null,this.businessModel.applicantid=this.userInfo.USER_ID,this.$store.commit("updateBusinessModel",this.businessModel)},initModels:function(e){this.loadMaterialData(),this.getFormByPermidV2(),this.initBusinessModel(),null!=e.bsnum&&e.bsnum.length>0?(this.businessModel.bsnum=e.bsnum,this.formsModel.bsnum=e.bsnum,this.getWebhallbusiness(),this.getInsFormData(),this.getInsMaterialInfo()):(this.formsModel.realName=this.userInfo.REALNAME,this.formsModel.mobile=this.userInfo.MOBILE,this.formsModel.code=this.userInfo.CODE,this.formsModel.userEmail=this.userInfo.EMAIL,this.formsModel.certificateTypesCode="10",this.formsModel.userPhone=this.userInfo.MOBILE,this.formsModel.userAddress=this.userInfo.ADDRESS||"",this.formsModel.bsnum=null,this.$store.commit("updateFormsModel",this.formsModel),this.initBusinessModel(this.applyItemInfo),this.$refs.baseForm.updateInputData(this.formsModel))},loadMaterialData:function(){var e=this;console.log("getMaterialList"),s.default.getMaterialList(this.businessModel.permId).then((function(t){if(console.log("loadMaterialData",t),200==t["code"]&&null!=t["ReturnValue"]){var a=t["ReturnValue"];e.$store.commit("updateMaterialList",a)}}))},getFormByPermidV2:function(){var e=this;console.log("getFormByPermidV2"),s.default.getFormByPermidV2(this.businessModel.permId).then((function(t){if(console.log("getFormByPermidV2 res:",t),200==t["code"]&&null!=t["ReturnValue"]){var a=t["ReturnValue"][0];e.formsModel.version=a["FORMVER"]||"",e.formsModel.formtype=a["FORMTYPE"]||"10",e.formsModel.formid=a["ID"]||"A",e.$store.commit("updateFormsModel",e.formsModel)}else uni.showToast({title:"基本表单加载失败"})}))},initBusinessModel:function(e){null!=e&&(this.businessModel.largeitemid=e.LARGEITEMID,this.businessModel.smallitemid=e.SMALLITEMID,this.businessModel.smallitemname=e.SXZXNAME,this.businessModel.itemversion=e.ITEMVERSION,this.businessModel.itemlimittime=e.ITEMLIMITTIME,this.businessModel.itemlimitunit=e.ITEMLIMITUNIT,this.businessModel.regionid=e.REGIONID,this.businessModel.deptcode=e.DEPTID,this.businessModel.deptname=e.DEPTNAME,this.businessModel.projectname=e.SXZXNAME,this.businessModel.lawaddr=e.LAWADDR,this.businessModel.realaddr=e.REALADDR,this.$store.commit("updateBusinessModel",this.businessModel))},getWebhallbusiness:function(){var e=this;null!=this.businessModel.bsnum&&0!=this.businessModel.bsnum.length&&s.default.getWebhallbusiness(this.userInfo.TOKEN,this.businessModel.bsnum).then((function(t){console.log("getWebhallbusiness result:",t),200==t["code"]&&e.initBusinessModel(t.ReturnValue)}))},getInsFormData:function(){var e=this;null!=this.businessModel.bsnum&&0!=this.businessModel.bsnum.length&&s.default.getInsFormData(this.userInfo.TOKEN,this.businessModel.bsnum).then((function(t){console.log("getInsFormData result:",t);var a=t;e.initBusinessModel(a),e.formsModel.realName=a.sqr_mc,e.formsModel.mobile=a.sqr_yddh,e.formsModel.code=a.sqr_sfzjhm,e.formsModel.userEmail=a.sqr_dzxx,e.formsModel.certificateTypesCode=a.zjlx,e.formsModel.userPhone=a.sqr_yddh,e.formsModel.userAddress=a.sqr_yddh||"",e.$store.commit("updateFormsModel",e.formsModel),e.$refs.baseForm.updateInputData(e.formsModel)}))},back:function(){uni.navigateBack()},getInsMaterialInfo:function(){var e=this;null!=this.businessModel.bsnum&&0!=this.businessModel.bsnum.length&&s.default.getInsMaterialInfo(this.userInfo.TOKEN,this.businessModel.bsnum).then((function(t){console.log("getInsMaterialInfo result:",t);for(var a={},i={},s=0;s<t.length;s++){var o=t[s],l=o.file;if(l){for(var r=[],u=0;u<l.length;u++){var d=l[u];r.push({filedel:"",fileid:d.fileid,filename:d.filename,filepath:n.default.downloadFileURL+d.fileid,fileNo:d.fileid,filetype:"img",id:d.fileid,isUploading:0,localImg:""})}a[o.materialid]=r,i[o.materialid]={uploaded:l.length,uploading:l.length}}}e.$store.commit("updateUploadMaterials",a),e.$store.commit("updateUploadMaterialsNum",i),e.$refs.material.updateMaterials(a,i)}))},switchNav:function(e){e!=this.currentNav&&(this.currentNav=e,console.log("nav:",this.currentNav))},changeSwiper:function(e){this.currentNav=e.detail.current}}};t.default=f},b6f8:function(e,t,a){"use strict";a.r(t);var i=a("857f"),n=a.n(i);for(var s in i)"default"!==s&&function(e){a.d(t,e,(function(){return i[e]}))}(s);t["default"]=n.a},bf3b:function(e,t,a){var i=a("d049");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("1a49238e",i,!0,{sourceMap:!1,shadowMode:!1})},c10d:function(e,t,a){"use strict";a.r(t);var i=a("74be"),n=a("452a");for(var s in n)"default"!==s&&function(e){a.d(t,e,(function(){return n[e]}))}(s);a("a7a4");var o,l=a("f0c5"),r=Object(l["a"])(n["default"],i["b"],i["c"],!1,null,"4a50a79a",null,!1,i["a"],o);t["default"]=r.exports},d049:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.base-apply[data-v-049bb4a8]{background-color:#f1f1f1}.slider-tab .scroll-view-x[data-v-049bb4a8]{background-color:#fff;white-space:nowrap;z-index:9999;top:0}.slider-tab .scroll-view-x .scroll-view-item[data-v-049bb4a8]{display:inline-block;margin:0 %?30?%;line-height:45px;cursor:pointer}.slider-tab .on[data-v-049bb4a8]{border-bottom:2px solid #4280e7;color:#4280e7}.seperator[data-v-049bb4a8]{height:%?20?%;width:100%;background-color:#f1f1f1;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-webkit-flex-direction:row;flex-direction:row}.apply-navigation[data-v-049bb4a8]{width:100%;height:%?60?%;background-color:#f6f7f6}.back[data-v-049bb4a8]{width:%?30?%;height:%?40?%}',""]),e.exports=t},d0ba:function(e,t,a){var i=a("91ff");"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var n=a("4f06").default;n("de7ce120",i,!0,{sourceMap:!1,shadowMode:!1})},df4c:function(e,t,a){"use strict";var i=a("9c7c"),n=a.n(i);n.a},e6b2:function(e,t,a){"use strict";var i=a("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(a("b978")),s=i(a("33b4")),o=i(a("cbf0")),l=a("2f62"),r={name:"mine",components:{InputCell:n.default},data:function(){return{itemList:[],inputData:{realName:"",mobile:"",certificateTypesCode:"",code:"",userEmail:"",userAddress:"",itemName:""}}},computed:(0,l.mapState)(["applyItemInfo","userInfo","businessModel","formsModel","materialsModel","postModel"]),created:function(){var e=[],t=s.default.certificateTypes;for(var a in t)e.push(t[a]);this.itemList=e},mounted:function(){this.updateInputData(this.formsModel)},methods:{updateInputData:function(e){this.inputData.realName=e.realName,this.inputData.mobile=e.mobile,this.inputData.certificateTypesCode=e.certificateTypesCode,this.inputData.code=e.code,this.inputData.userEmail=e.userEmail,this.inputData.userAddress=e.userAddress,this.inputData.itemName=e.itemName,console.log("基本表单页面:",this.inputData)},checkBaseInfo:function(e){return o.default.isEmpty(this.inputData.realName)||o.default.isEmpty(this.inputData.mobile)||o.default.isEmpty(this.inputData.code)||o.default.isEmpty(this.inputData.itemName)?(e&&uni.showToast({icon:"none",title:"基本表单带*的选项为必填内容"}),!1):o.default.checkIDCard(this.inputData.certificateTypesCode,this.inputData.code)?o.default.isEmpty(this.inputData.userEmail)||o.default.isEmail(this.inputData.userEmail)?(this.formsModel.stateBaseForm=!0,this.$store.commit("updateFormsModel",this.formsModel),!0):(e&&uni.showToast({icon:"none",title:"请填写正确的邮箱地址"}),!1):(e&&uni.showToast({icon:"none",title:"请填写正确的证件号码"}),!1)},getItemData:function(e){var t=this.formsModel;if("certificateTypesCode"==e.field){this.inputData["certificateTypesCode"]=e.value,t.certificateType=e.value;var a=s.default.certificateTypes;for(var i in a)if(e.value===a[i]){t.certificateTypesCode=i;break}}else this.inputData[e.field]=e.value,t[e.field]=e.value;console.log("mine data:",e),this.$store.commit("updateFormsModel",t)},tempStore:function(){this.$emit("tempStore",{page:"baseFormPage"})},next:function(){this.$emit("next",{page:"baseFormPage"})}}};t.default=r},e73e:function(e,t,a){var i=a("24fb");t=i(!1),t.push([e.i,'@charset "UTF-8";\n/**\n * 这里是uni-app内置的常用样式变量\n *\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\n *\n */\n/**\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\n *\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */.base-form-uni[data-v-7d952739]{background-color:#fff}.bottom-btns[data-v-7d952739]{position:fixed;z-index:9999;bottom:0;left:0;right:0;height:%?100?%;width:100vw;text-align:center;line-height:%?100?%}.bottom-btns .pre[data-v-7d952739]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#0072ff;background-color:#fff;position:relative}.bottom-btns .pre[data-v-7d952739]:after{content:"";position:absolute;top:%?24?%;right:0;bottom:%?24?%;width:1px;margin:auto 0;background-color:#ddd;overflow:hidden}.bottom-btns .tempstore[data-v-7d952739]{-webkit-box-flex:1;-webkit-flex:1;flex:1;color:#0072ff;background-color:#fff}.bottom-btns .next[data-v-7d952739]{-webkit-box-flex:1;-webkit-flex:1;flex:1;background-color:#0072ff;color:#fff}',""]),e.exports=t},ebb4:function(e,t,a){"use strict";var i=a("bf3b"),n=a.n(i);n.a},ed55:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i={name:"BaseFormWeb",data:function(){return{url:"http://61.178.200.43:8200/u/forms/A/A.html?shareformvalue="}},onLoad:function(){var e={REALNAME:"任我行"};e=JSON.stringify(e),this.url+=encodeURIComponent(e)},methods:{}};t.default=i},ff02:function(e,t,a){"use strict";var i=a("aded"),n=a.n(i);n.a}}]);